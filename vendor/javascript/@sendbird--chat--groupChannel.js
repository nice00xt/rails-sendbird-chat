import{j as e,B as n,v as r,y as a,a4 as s,p as o,s as u,r as c,i as h,k as d,t as p,$ as v,ak as y,al as C,G as b,l as M,n as E,b as w,h as N,a8 as x,D as G,o as U,am as O,d as D,a as P,R as H,an as R,I as V,N as W,V as z,ao as B,ap as ee,ag as te,aq as ne,H as re}from"./_/Wnxi7MtC.js";export{ar as MessageEventSource,as as MutedState}from"./_/Wnxi7MtC.js";import{h as ae,v as se,c as ie,e as oe,p as le,z as ue,d as ce,W as he,r as de,a as pe,b as fe,o as ve,u as me,n as _e,s as ge}from"./_/DJIXvR96.js";export{i as CountPreference,f as DeliveryStatus,_ as GroupChannelEventSource,X as GroupChannelSearchField,K as HiddenChannelFilter,g as HiddenState,Z as Member,T as MemberListOrder,F as MemberListQuery,q as MemberState,A as MemberStateFilter,L as MessageCollection,I as MessageCollectionInitHandler,j as MessageCollectionInitPolicy,S as MutedMemberFilter,k as MyMemberStateFilter,Y as OperatorFilter,l as PinnedMessage,m as PinnedMessageListQuery,J as QueryType,Q as UnreadChannelFilter,$ as UnreadItemKey}from"./_/DJIXvR96.js";import{af as ye,ag as Ce,ah as be}from"./_/1FmaOF00.js";export{ai as MessageFilter,aj as ReadStatus}from"./_/1FmaOF00.js";import{E as Se,p as Me,R as Le}from"./_/PtY-oWb0.js";import{t as Ee}from"./_/VEqLCKc1.js";import"./_/G1o6m-5n.js";import"./_/KlDdEvEx.js";var we,Ae={},Te=function(){function t(i){var p=i._iid,f=i.limit,v=void 0===f?100:f,m=this;this.ref=0,this._iid=p,this._limit=v;var _,g=e.of(this._iid),y=g.sdkState,C=g.dispatcher,b=g.logger,S=g.cacheContext;this._metadataKey=(_=y.userId,"sendbird:".concat(_,"@groupchannel/sync.meta"));var M=function(e){return"sendbird:".concat(e,"@groupchannel/sync")}(y.userId);this._sync=new se(M,(function(){return c(m,void 0,void 0,(function(){var e,i,c,h,d,p,f,v,m,_,g,C;return u(this,(function(u){switch(u.label){case 0:return e={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(u.sent(),b.debug("channel background sync from",null===(m=this._metadata)||void 0===m?void 0:m.token),null===(_=this._metadata)||void 0===_?void 0:_.completed)return[3,13];u.label=2;case 2:if(u.trys.push([2,9,,12]),(i={includeEmpty:!0,order:Se.CHRONOLOGICAL}).order!==Se.LATEST_LAST_MESSAGE)return[3,6];u.label=3;case 3:return u.trys.push([3,5,,6]),[4,S.preference.get(o(y.appId))];case 4:return c=u.sent(),i.includeChatNotification=Boolean(c),[3,6];case 5:return u.sent(),i.includeChatNotification=!1,[3,6];case 6:return[4,ae.of(this._iid).getMyGroupChannels(null!==(C=null===(g=this._metadata)||void 0===g?void 0:g.token)&&void 0!==C?C:"",i,this._limit,s.SYNC_CHANNEL_BACKGROUND)];case 7:return h=u.sent(),d=h.channels,p=h.token,e.hasNext=d.length>=this._limit&&!!p,e.nextToken=p,this._metadata&&(this._metadata.token=p,(v=this._metadata.range).extends.apply(v,a([],r(d.map((function(e){return e.createdAt}))),!1)),this._metadata.completed=!e.hasNext),b.debug("channel background sync progress",e),[4,this.saveMetadata()];case 8:return u.sent(),[3,12];case 9:return f=u.sent(),b.debug("channel background sync error",f),f instanceof n&&f.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:u.sent(),u.label=11;case 11:throw f;case 12:return[3,14];case 13:e.hasNext=!1,e.nextToken="",u.label=14;case 14:return[2,e]}}))}))})),this._connectionEventContext=C.on((function(e){e instanceof h&&(e.stateType===d.CONNECTED?m.resume():m.pause())}))}return t.of=function(e){return Ae[e]||(Ae[e]=new t({_iid:e})),Ae[e].ref++,Ae[e]},t.clear=function(e){Ae[e]&&(Ae[e].close(),delete Ae[e])},Object.defineProperty(t.prototype,"range",{get:function(){var e,n;return null!==(n=null===(e=this._metadata)||void 0===e?void 0:e.range)&&void 0!==n?n:new ie({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){var e;return!!(null===(e=this._metadata)||void 0===e?void 0:e.completed)},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return c(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return this._metadata?[3,2]:[4,e.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=r.sent(),this._metadata={token:n?n.token:"",range:new ie(n?n.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!n&&n.completed},r.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this._metadata?[4,e.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetaData=function(){return c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,e.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var n,r,a=e.of(this._iid),s=a.logger;a.sessionManager.session.hasSession&&(s.debug("channel background sync resume()"),this._sync.start(null!==(r=null===(n=this._metadata)||void 0===n?void 0:n.token)&&void 0!==r?r:""))},t.prototype.pause=function(){e.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ae[this._iid])},t}(),ke={},Fe=function(){function t(r){var a=r._iid,i=this;this.ref=0,this._iid=a;var f,v=e.of(this._iid),m=v.logger,_=v.sdkState,g=v.dispatcher,y=v.cacheContext;this._metadataKey=(f=_.userId,"sendbird:".concat(f,"@groupchannel/changelogs.meta")),this._subscribers=new p;var C=function(e){return"sendbird:".concat(e,"@groupchannel/changelogs")}(_.userId);this._sync=new se(C,(function(){return c(i,void 0,void 0,(function(){var e,r,a,i,c,h,d,p,f,v,g,C;return u(this,(function(u){switch(u.label){case 0:return e={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:u.sent(),m.debug("channel changelog sync from",null===(v=this._metadata)||void 0===v?void 0:v.token),u.label=2;case 2:u.trys.push([2,9,,12]),r={includeEmpty:!0},u.label=3;case 3:return u.trys.push([3,5,,6]),[4,y.preference.get(o(_.appId))];case 4:return a=u.sent(),r.includeChatNotification=Boolean(a),[3,6];case 5:return u.sent(),r.includeChatNotification=!1,[3,6];case 6:return[4,ae.of(this._iid).getMyGroupChannelChangeLogs(null!==(C=null===(g=this._metadata)||void 0===g?void 0:g.token)&&void 0!==C?C:"",r,s.SYNC_CHANNEL_CHANGELOGS)];case 7:return i=u.sent(),c=i.updatedChannels,h=i.deletedChannelUrls,d=i.hasMore,p=i.token,this._subscribers.dispatch("progress",{updatedChannels:c,deletedChannelUrls:h,hasMore:d,token:p}),e.hasNext=d,e.nextToken=p,this._metadata&&(this._metadata.token=p),m.debug("channel changelog sync progress",e),[4,this.saveMetadata()];case 8:return u.sent(),[3,12];case 9:return f=u.sent(),m.debug("channel changelog sync error",f),f instanceof n&&f.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:u.sent(),u.label=11;case 11:throw f;case 12:return[2,e]}}))}))})),this._sync.on("stop",(function(){i._subscribers.dispatch("pause")})),this._connectionEventContext=g.on((function(e){e instanceof h&&(e.stateType===d.CONNECTED?i.resume():i.pause())}))}return t.of=function(e){return ke[e]||(ke[e]=new t({_iid:e})),ke[e].ref++,ke[e]},t.clear=function(e){ke[e]&&(ke[e].close(),delete ke[e])},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return c(this,void 0,void 0,(function(){var n,r,a,s;return u(this,(function(i){switch(i.label){case 0:return this._metadata?[3,2]:(n=e.of(this._iid),r=n.cacheContext,a=n.firstConnectedAt,[4,r.preference.get(this._metadataKey)]);case 1:s=i.sent(),this._metadata={token:s?s.token:a},i.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this._metadata?[4,e.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,e.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.on=function(e,n){return this._subscribers.on(e,n)},t.prototype.resume=function(){e.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},t.prototype.pause=function(){this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete ke[this._iid])},t}(),Ie=function(e,n){return e.findIndex((function(e){return e.isIdentical(n)}))},He=function(e,n,r){if(e.length>0){for(var a=Ie(e,n),s=0,i=e.length-1,o=Math.floor((s+i)/2);s<i;){var u=Re(e[o],n,r);if(u>0)i=o,o=Math.floor((s+i)/2);else{if(!(u<0))return{place:o,oldPosition:a};s=o+1,o=Math.floor((s+i)/2)}}return{place:Re(e[o],n,r)>=0?o:o+1,oldPosition:a}}return{place:e.length,oldPosition:-1}},Re=function(e,n,r){switch(r){case Se.LATEST_LAST_MESSAGE:return e.lastMessage&&n.lastMessage?n.lastMessage.createdAt-e.lastMessage.createdAt:e.lastMessage?-1:n.lastMessage?1:n.createdAt-e.createdAt;case Se.CHRONOLOGICAL:return n.createdAt-e.createdAt;case Se.CHANNEL_NAME_ALPHABETICAL:var a=e.name.localeCompare(n.name);return 0===a?e.createdAt-n.createdAt:a;default:return 0}},Ne=function(){function t(n,r){var a=r.filter,s=void 0===a?new oe:a,i=r.order,o=void 0===i?Se.LATEST_LAST_MESSAGE:i,p=r.limit,f=void 0===p?ye:p,m=r.includeChangesOnInitialLoad,_=void 0!==m&&m,g=this;this.channels=[],this._iid=n,this._key="gcc-".concat(v()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=_,this.filter=s,this.order=o,this._hasMore=!0,this._token="",this._limit=f;var b=e.of(this._iid),S=b.sdkState,M=b.cacheContext,L=b.dispatcher;M.localCacheEnabled&&(this._backgroundSync=Te.of(n),this._backgroundSync.resume()),this._changelogSync=Fe.of(n),this._changelogSync.resume(),ae.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(e,n){var r=n.source;if(le(r)){var a=e.filter((function(e){return g.filter.match(e,S.userId)})),s=e.filter((function(e){return!g.filter.match(e,S.userId)})).map((function(e){return e.url}));a.length>0&&g._addChannelsToView(a,n),s.length>0&&g._removeChannelsFromView(s,n)}},onRemove:function(e,n){g._removeChannelsFromView(e,n)}}),e.of(this._iid).statManager.put(new C({type:y.FEATURE_LOCALCACHE,data:{use_local_cache:M.localCacheEnabled,collection_interface:{group_channel:!0}}})),L.on((function(e){e instanceof h&&(e.stateType===d.CONNECTED?g._isGetRemoteChannelsSucceeded||c(g,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._revokeLoadMore()];case 1:return e.sent(),[2]}}))})):e.stateType===d.LOGOUT&&g.dispose())}))}return Object.defineProperty(t.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),t.prototype.setGroupChannelCollectionHandler=function(e){this._handler=e},t.prototype._addChannelsToView=function(e,n,r){var a,i,o,h,d=this;void 0===r&&(r=!1);var p=[],f=[],v=[];try{for(var m=b(e),_=m.next();!_.done;_=m.next()){var g=_.value,y=Ie(this.channels,g);y>=0&&this.channels.splice(y,1);var C=He(this.channels,g,this.order).place;if(y<0)C===this.channels.length?!r&&this._hasMore||(p.push(g),this.channels.push(g)):(p.push(g),this.channels.splice(C,0,g));else switch(n.source){case s.EVENT_CHANNEL_UPDATED:case s.EVENT_MESSAGE_RECEIVED:case s.SYNC_CHANNEL_CHANGELOGS:case s.EVENT_MESSAGE_SENT:this.order===Se.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&C===this.channels.length?v.push(g):(this.channels.splice(C,0,g),f.push(g));break;default:this.channels.splice(C,0,g),f.push(g)}}}catch(e){a={error:e}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}if(v.length>0)try{for(var S=b(v),L=S.next();!L.done;L=S.next()){g=L.value;var E=Ie(this.channels,g);-1!==E&&this.channels.splice(E,1)}}catch(e){o={error:e}}finally{try{L&&!L.done&&(h=S.return)&&h.call(S)}finally{if(o)throw o.error}}le(n.source)&&M((function(){return c(d,void 0,void 0,(function(){var e,r,a;return u(this,(function(s){return p.length>0&&(null===(e=this._handler)||void 0===e?void 0:e.onChannelsAdded)&&this._handler.onChannelsAdded(n,p),f.length>0&&(null===(r=this._handler)||void 0===r?void 0:r.onChannelsUpdated)&&this._handler.onChannelsUpdated(n,f),v.length>0&&(null===(a=this._handler)||void 0===a?void 0:a.onChannelsDeleted)&&this._handler.onChannelsDeleted(n,v.map((function(e){return e.url}))),[2]}))}))}))},t.prototype._removeChannelsFromView=function(e,n){var r,a,s=this,i=[],l=function(e){var n=o.channels.findIndex((function(n){return n.url===e}));n>=0&&(i.push(o.channels[n].url),o.channels.splice(n,1))},o=this;try{for(var h=b(e),d=h.next();!d.done;d=h.next())l(d.value)}catch(e){r={error:e}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}return le(n.source)&&i.length>0&&M((function(){return c(s,void 0,void 0,(function(){var e;return u(this,(function(r){return(null===(e=this._handler)||void 0===e?void 0:e.onChannelsDeleted)&&this._handler.onChannelsDeleted(n,i),[2]}))}))})),i},t.prototype._getLocalChannels=function(){return c(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return e=ae.of(this._iid),n=this.channels.length>0?function(e,n){var r,a,s,i;switch(n){case Se.LATEST_LAST_MESSAGE:return null!==(a=null===(r=e.lastMessage)||void 0===r?void 0:r.createdAt)&&void 0!==a?a:e.createdAt;case Se.CHRONOLOGICAL:return e.createdAt;case Se.CHANNEL_NAME_ALPHABETICAL:return e.name;default:return null!==(i=null===(s=e.lastMessage)||void 0===s?void 0:s.createdAt)&&void 0!==i?i:e.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,e.getChannelsFromCache(n,this.filter,this.order,this._limit,n?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,r.sent()]}}))}))},t.prototype._getRemoteChannels=function(){return c(this,void 0,void 0,(function(){var e,n,r;return u(this,(function(a){switch(a.label){case 0:return[4,ae.of(this._iid).getMyGroupChannels(this._token,w(E(E({},this.filter),{order:this.order})),this._limit)];case 1:return e=a.sent(),n=e.channels,r=e.token,this._token=r,this._hasMore=!!r,[2,n]}}))}))},t.prototype._revokeLoadMore=function(){return c(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:if(this._isDisposed)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return e=n.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(e,{source:s.REQUEST_CHANNEL},!0),[3,4];case 3:return n.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},t.prototype.loadMore=function(){var r;return c(this,void 0,void 0,(function(){var a,i,o,h,d,p,f,v,m,_,g,y,C,S,M,L,E,w,A=this;return u(this,(function(T){switch(T.label){case 0:if(this._isDisposed)throw new n({code:x.COLLECTION_DISPOSED,message:"Collection has been disposed."});return a=null,this._includeChangesOnInitialLoad&&0===this.channels.length&&this._changelogSync.isRunning?[4,new Promise((function(e){A._changelogSyncSubscriberContext=A._changelogSync.on("progress",(function(n){return e(n)})).on("pause",(function(){return e(null)}))}))]:[3,2];case 1:a=T.sent(),null===(r=this._changelogSyncSubscriberContext)||void 0===r||r.close(),T.label=2;case 2:return i=[],this._hasMore?(o=e.of(this._iid),h=o.cacheContext,d=o.connectionManager,!h.localCacheEnabled||d.isConnected&&!this._backgroundSync.completed?[3,4]:[4,N((function(){return c(A,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._getLocalChannels()];case 1:return i=e.sent(),[2]}}))}))}))]):[3,8];case 3:return T.sent(),this._hasMore=i.length>=this._limit,[3,7];case 4:return T.trys.push([4,6,,7]),[4,this._getRemoteChannels()];case 5:return i=T.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,7];case 6:return T.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,7];case 7:this._addChannelsToView(i,{source:s.REQUEST_CHANNEL},!0),T.label=8;case 8:if(a){try{for(p=b(a.updatedChannels),f=p.next();!f.done;f=p.next())v=f.value,(S=Ie(i,v))>=0?i[S]=v:(m=He(i,v,this.order).place,i.splice(m,0,v))}catch(e){M={error:e}}finally{try{f&&!f.done&&(L=p.return)&&L.call(p)}finally{if(M)throw M.error}}_=i.map((function(e){return e.url}));try{for(g=b(a.deletedChannelUrls),y=g.next();!y.done;y=g.next())C=y.value,(S=_.indexOf(C))>=0&&(i.splice(S,1),_.splice(S,1))}catch(e){E={error:e}}finally{try{y&&!y.done&&(w=g.return)&&w.call(g)}finally{if(E)throw E.error}}}return[2,i]}}))}))},t.prototype.dispose=function(){var e,n,r;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),null===(e=this._backgroundSync)||void 0===e||e.close(),null===(n=this._changelogSync)||void 0===n||n.close(),null===(r=this._changelogSyncSubscriberContext)||void 0===r||r.close(),ae.of(this._iid).unsubscribeChannelEvent(this._key))},t}(),$e=function(e){function t$1(n){var r=this,a=n.token,s=n.limit,i=n.order,o=n.includeEmpty,u=n.membershipFilter,c=n.channelNameContainsFilter,h=n.channelUrlsFilter,d=n.customTypesFilter,p=n.customTypeStartsWithFilter,f=n.superChannelFilter,v=n.metadataOrderKeyFilter,m=n.metadataKey,_=n.metadataValues,g=n.metadataValueStartsWith,y=n.includeFrozen,C=n.includeMetaData;return(r=e.call(this)||this).method=U.GET,r.path=O,r.params=D(w({token:a,limit:s,order:i,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:o,public_mode:ue.PUBLIC,public_membership_mode:u,name_contains:c,channel_urls:h,custom_types:d,custom_type_startswith:p,super_mode:f,metadata_order_key:v,metadata_key:m,metadata_values:_,metadata_value_startswith:g,show_frozen:y,show_metadata:C})),r}return P(t$1,e),t$1}(G),xe=function(e){function t$1(n,r){var a=e.call(this,n,r)||this;a.channels=[];var s=r.next,i=r.channels,o=r.ts;return a.token=s,i&&i.length>0&&(a.channels=i.map((function(e){return e.ts=o,new ce(n,e)}))),a.ts="number"==typeof o?o:0,a}return P(t$1,e),t$1}(H);!function(e){e.ALL="all",e.JOINED="joined"}(we||(we={}));var Ge=function(r){function n$1(e,n){var a,s,i,o,u,c,h,d,p,f,v,m,_,g,y=this;return(y=r.call(this,e,n)||this).includeEmpty=!1,y.includeFrozen=!0,y.includeMetaData=!0,y.channelUrlsFilter=null,y.customTypesFilter=null,y.customTypeStartsWithFilter=null,y.channelNameContainsFilter=null,y.membershipFilter=we.ALL,y.superChannelFilter=he.ALL,y.metadataKey=null,y.metadataValues=null,y.metadataOrderKeyFilter=null,y.metadataValueStartsWith=null,y.order=Me.CHRONOLOGICAL,y.includeEmpty=null!==(a=n.includeEmpty)&&void 0!==a&&a,y.includeFrozen=null===(s=n.includeFrozen)||void 0===s||s,y.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,y.channelUrlsFilter=null!==(o=n.channelUrlsFilter)&&void 0!==o?o:null,y.customTypesFilter=null!==(u=n.customTypesFilter)&&void 0!==u?u:null,y.customTypeStartsWithFilter=null!==(c=n.customTypeStartsWithFilter)&&void 0!==c?c:null,y.channelNameContainsFilter=null!==(h=n.channelNameContainsFilter)&&void 0!==h?h:null,y.membershipFilter=null!==(d=n.membershipFilter)&&void 0!==d?d:we.ALL,y.superChannelFilter=null!==(p=n.superChannelFilter)&&void 0!==p?p:he.ALL,y.metadataKey=null!==(f=n.metadataKey)&&void 0!==f?f:null,y.metadataValues=null!==(v=n.metadataValues)&&void 0!==v?v:null,y.metadataOrderKeyFilter=null!==(m=n.metadataOrderKeyFilter)&&void 0!==m?m:null,y.metadataValueStartsWith=null!==(_=n.metadataValueStartsWith)&&void 0!==_?_:null,y.order=null!==(g=n.order)&&void 0!==g?g:Me.CHRONOLOGICAL,y}return P(n$1,r),n$1.prototype._validate=function(){return r.prototype._validate.call(this)&&V("boolean",this.includeEmpty)&&V("boolean",this.includeFrozen)&&V("boolean",this.includeMetaData)&&V("string",this.channelNameContainsFilter,!0)&&W("string",this.channelUrlsFilter,!0)&&W("string",this.customTypesFilter,!0)&&V("string",this.customTypeStartsWithFilter,!0)&&z(we,this.membershipFilter)&&z(he,this.superChannelFilter)&&z(Me,this.order)&&V("string",this.metadataOrderKeyFilter,!0)&&V("string",this.metadataKey,!0)&&W("string",this.metadataValues,!0)&&V("string",this.metadataValueStartsWith,!0)},n$1.prototype.next=function(){return c(this,void 0,void 0,(function(){var r,a,s,i,o,c,h;return u(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(r=[],this._hasNext?(this._isLoading=!0,a=e.of(this._iid).requestQueue,s=new $e(w(E(E({},this),{token:this._token}))),[4,a.send(s)]):[3,2]):[3,5];case 1:return i=u.sent(),o=i.as(xe),c=o.channels,h=o.token,this._token=h,this._hasNext=!!h,this._isLoading=!1,[2,c];case 2:return[2,r];case 3:throw n.queryInProgress;case 4:return[3,6];case 5:throw n.invalidParameters;case 6:return[2]}}))}))},n$1}(R),Ue=function(e){function t$1(n){void 0===n&&(n={});var r=e.call(this)||this;return Object.keys(n).forEach((function(e){r.hasOwnProperty(e)&&(r[e]=n[e])})),r}return P(t$1,e),t$1}(function(e){function t$1(){var n=null!==e&&e.apply(this,arguments)||this;return n.onUserJoined=B,n.onUserLeft=B,n.onUserReceivedInvitation=B,n.onUserDeclinedInvitation=B,n.onChannelHidden=B,n.onUnreadMemberStatusUpdated=B,n.onUndeliveredMemberStatusUpdated=B,n.onTypingStatusUpdated=B,n.onPollUpdated=B,n.onPollVoted=B,n.onPollDeleted=B,n.onPinnedMessageUpdated=B,n}return P(t$1,e),t$1}(Ee)),Oe=function(e){function t$1(n){var r=this,a=n.token,s=n.limit,i=n.order,o=n.reverse,u=n.channelUrl,c=n.messageTypeFilter,h=n.scheduledStatus;return(r=e.call(this)||this).method=U.GET,r.path="".concat(ee),r.params=D(w({token:a,limit:s,reverse:o,channel_url:u,order:i,message_type:c,status:h})),r}return P(t$1,e),t$1}(G),De=function(e){function t$1(n,r){var a=e.call(this,n,r)||this;a.scheduledMessages=[];var s=r.next,i=r.scheduled_messages;return a.token=s,a.scheduledMessages=i.map((function(e){return Ce(n,e)})),a}return P(t$1,e),t$1}(H),Pe=function(r){function n$1(e,n){var a,s,i,o,u,c=this;return(c=r.call(this,e,n)||this).channelUrl=null,c.order=null,c.reverse=!1,c.scheduledStatus=null,c.messageTypeFilter=te.ALL,c.channelUrl=null!==(a=n.channelUrl)&&void 0!==a?a:null,c.order=null!==(s=n.order)&&void 0!==s?s:null,c.reverse=null!==(i=n.reverse)&&void 0!==i&&i,c.scheduledStatus=null!==(o=n.scheduledStatus)&&void 0!==o?o:null,c.messageTypeFilter=null!==(u=n.messageTypeFilter)&&void 0!==u?u:te.ALL,c}return P(n$1,r),n$1.prototype._validate=function(){return r.prototype._validate.call(this)&&V("string",this.channelUrl,!0)&&(z(Le,this.order)||null===this.order)&&V("boolean",this.reverse)&&(W(be,this.scheduledStatus)||null===this.scheduledStatus)&&z(te,this.messageTypeFilter)},n$1.prototype.next=function(){return c(this,void 0,void 0,(function(){var r,a,s,i,o,c;return u(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,r=e.of(this._iid).requestQueue,a=new Oe(w(E(E({},this),{token:this._token}))),[4,r.send(a)]):[3,2]:[3,5];case 1:return s=u.sent(),i=s.as(De),o=i.scheduledMessages,c=i.token,this._token=c,this._hasNext=!!c,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw n.queryInProgress;case 4:return[3,6];case 5:throw n.invalidParameters;case 6:return[2]}}))}))},n$1}(R),Ve=function(e){function n$1(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="groupChannel",n}return P(n$1,e),n$1.prototype.init=function(n,r){var a=r.sdkState,s=r.dispatcher,i=r.sessionManager,o=r.requestQueue,u=r.logger,c=r.onlineDetector,h=r.cacheContext;e.prototype.init.call(this,n,{sdkState:a,dispatcher:s,sessionManager:i,requestQueue:o,logger:u,onlineDetector:c,cacheContext:h}),this._manager=new ae(n,{sdkState:a,cacheContext:h,dispatcher:s,sessionManager:i,requestQueue:o,logger:u})},n$1.prototype.createGroupChannelCollection=function(e){return void 0===e&&(e={}),new Ne(this._iid,e)},n$1.prototype.createMyGroupChannelListQuery=function(e){return void 0===e&&(e={}),new de(this._iid,e)},n$1.prototype.createPublicGroupChannelListQuery=function(e){return void 0===e&&(e={}),new Ge(this._iid,e)},n$1.prototype.createScheduledMessageListQuery=function(e){return void 0===e&&(e={}),new Pe(this._iid,e)},n$1.prototype.addGroupChannelHandler=function(e,r){re(V("string",e)&&r instanceof Ue).throw(n.invalidParameters),this._manager.addHandler(e,r)},n$1.prototype.removeGroupChannelHandler=function(e){re(V("string",e)).throw(n.invalidParameters),this._manager.removeHandler(e)},n$1.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n$1.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},n$1.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},n$1.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},n$1.prototype.getChannel=function(e){return c(this,void 0,void 0,(function(){return u(this,(function(r){return re(V("string",e)).throw(n.invalidParameters),[2,this._manager.getChannel(e)]}))}))},n$1.prototype.getChannelWithoutCache=function(e){return c(this,void 0,void 0,(function(){return u(this,(function(r){return re(V("string",e)).throw(n.invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},n$1.prototype.getMyGroupChannelChangeLogsByToken=function(e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){var a;return u(this,(function(s){switch(s.label){case 0:return a=E(E({},pe),r),re(V("string",e)&&fe(a)).throw(n.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,a)];case 1:return[2,s.sent()]}}))}))},n$1.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,r){return void 0===r&&(r={}),c(this,void 0,void 0,(function(){var a;return u(this,(function(s){switch(s.label){case 0:return a=E(E({},pe),r),re(V("number",e)&&fe(a)).throw(n.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,a)];case 1:return[2,s.sent()]}}))}))},n$1.prototype.getGroupChannelCount=function(e){return c(this,void 0,void 0,(function(){var r;return u(this,(function(a){return r=E(E({},ve),e),re(me(r)).throw(n.invalidParameters),[2,this._manager.getGroupChannelCount(r)]}))}))},n$1.prototype.getUnreadItemCount=function(e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,n.sent()]}}))}))},n$1.prototype.getTotalUnreadChannelCount=function(){return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},n$1.prototype.getTotalUnreadMessageCount=function(e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,n.sent()]}}))}))},n$1.prototype.getTotalScheduledMessageCount=function(e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,n.sent()]}}))}))},n$1.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n$1.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n$1.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},n$1.prototype.createChannel=function(e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){var r;return u(this,(function(a){return r=E(E({},_e),e),re(ge(r)).throw(n.invalidParameters),[2,this._manager.createChannel(r)]}))}))},n$1.prototype.createDistinctChannelIfNotExist=function(e){return void 0===e&&(e={}),c(this,void 0,void 0,(function(){var r;return u(this,(function(a){return r=E(E({},_e),e),re(ge(r)).throw(n.invalidParameters),r&&(r.isDistinct=!0),[2,this.createChannel(r)]}))}))},n$1.prototype.createChannelWithUserIds=function(e,n,r,a,s,i){return void 0===n&&(n=!1),void 0===s&&(s=""),void 0===i&&(i=""),c(this,void 0,void 0,(function(){var o;return u(this,(function(u){return o=E(E({},_e),{invitedUserIds:e,isDistinct:n,name:r,data:s,customType:i}),"string"==typeof a?o.coverUrl=a:o.coverImage=a,[2,this.createChannel(o)]}))}))},n$1.prototype.markAsReadAll=function(){return c(this,void 0,void 0,(function(){return u(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},n$1.prototype.markAsReadWithChannelUrls=function(e){return c(this,void 0,void 0,(function(){return u(this,(function(r){return re(W("string",e)).throw(n.invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},n$1.prototype.markAsDelivered=function(e){return c(this,void 0,void 0,(function(){return u(this,(function(r){switch(r.label){case 0:return re(V("string",e)).throw(n.invalidParameters),[4,this.getChannel(e)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}}))}))},n$1}(ne);export{ce as GroupChannel,Ne as GroupChannelCollection,oe as GroupChannelFilter,Ue as GroupChannelHandler,Se as GroupChannelListOrder,de as GroupChannelListQuery,Ve as GroupChannelModule,we as MembershipFilter,ue as PublicChannelFilter,Me as PublicGroupChannelListOrder,Ge as PublicGroupChannelListQuery,Le as ScheduledMessageListOrder,Pe as ScheduledMessageListQuery,be as ScheduledStatus,he as SuperChannelFilter};

