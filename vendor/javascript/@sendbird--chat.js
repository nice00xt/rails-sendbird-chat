import{q as i,s as o,r as a,t as u,a as c,o as d,D as h,c as f,b as v,d as g,R as m,n as y,Z as _,f as b,g as $,E as I,m as S,T as C,j as E,e as T,h as P,i as D,k as O,U as A,l as N,w as M,Y as L,X as R,p as z,x as Q,u as j,F,$ as H,Q as x,v as K,y as G,z as W,A as B,B as V,C as J,G as X,N as Y,H as Z,I as ee,P as te,O as ne,L as re,J as ie,K as se,M as oe,S as ae,V as ue,W as ce,_ as de,a0 as le}from"./_/Wnxi7MtC.js";export{a1 as AppInfo,a2 as CachedChannelInfo,a3 as CachedDataClearOrder,a4 as CollectionEventSource,a5 as LogLevel,a6 as NotificationInfo,a7 as Role,a8 as SendbirdErrorCode,a9 as SendbirdPlatform,aa as SendbirdProduct,ab as UIKitConfigInfo,ac as UserOnlineState}from"./_/Wnxi7MtC.js";import{j as he,z as fe,B as pe,Q as ve,_ as ge,E as me,A as ye,N as _e,W as be,Y as $e,X as we,Z as ke,V as Ie,H as Se,T as Ce,f as Ee,v as Te,m as Pe,e as De,y as Ue,b as Oe,g as Ae,O as Ne,C as Me,u as Le,c as Re,o as ze,h as Qe,a as je,d as qe,i as Fe}from"./_/1FmaOF00.js";export{U as BannedUserListQuery,k as BaseChannel,w as MutedUserListQuery,l as OperatorListQuery,n as Participant,p as Plugin,q as ReportCategory,r as RestrictedUser,s as RestrictionInfo,t as RestrictionType}from"./_/1FmaOF00.js";import{PollModule as He}from"./poll.js";import{E as xe,L as Ke,S as Ge,T as We,C as Be,N as Ve,v as Je,D as Xe}from"./_/PtY-oWb0.js";import{e as Ye,r as Ze}from"./_/A3Ydjy8q.js";import"./_/KlDdEvEx.js";var ht=function(t){this.key=t.key,this.url=t.url},ft=function(t){this.id=t.id,this.name=t.name,this.url=t.url,this.emojis=t.emojis?t.emojis.map((function(t){return new ht(t)})):[]},pt=function(t){this.emojiHash=t.emoji_hash||"",this.emojiCategories=t.emoji_categories?t.emoji_categories.map((function(t){return new ft(t)})):[]},et={profileImage:void 0,profileUrl:void 0,nickname:void 0},gt=function(t){return function(n,r){return a(void 0,void 0,void 0,(function(){var s,u,c,d;return o(this,(function(l){switch(l.label){case 0:switch(n){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4]}return[3,11];case 1:return r(),[3,12];case 2:return[4,t.store.clear()];case 3:return l.sent(),r(),[3,12];case 4:return l.trys.push([4,9,,10]),s=function(t){return{v2:function(){return a(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:fe,keyName:pe,index:[Ke(xe.LATEST_LAST_MESSAGE),Ke(xe.CHRONOLOGICAL),Ke(xe.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:he,keyName:ve,index:[me(ge.CHANNEL_LATEST),me(ge.NEWEST_CHILD_MESSAGE)]},{collectionName:ye,keyName:_e,index:[me(ge.CHANNEL_LATEST),me(ge.NEWEST_CHILD_MESSAGE)]},{collectionName:be,keyName:$e}])];case 1:return[2,n.sent()]}}))}))},v3:function(){return a(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:we,keyName:ke,index:[Ye("latest_last_message")]}])];case 1:return[2,n.sent()]}}))}))},v4:function(){return a(void 0,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:Ie,keyName:Se,index:[Ce()]}])];case 1:return[2,n.sent()]}}))}))}}}(t),u=s.v2,c=s.v3,d=s.v4,[4,u()];case 5:return l.sent(),[4,c()];case 6:return l.sent(),[4,d()];case 7:return l.sent(),[4,t.collection(he).removeIf({where:{channelType:i.OPEN}})];case 8:case 9:return l.sent(),[3,10];case 10:return r(),[3,12];case 11:r(),l.label=12;case 12:return[2]}}))}))}},mt=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},tt=function(t){function t$1(n){var r=n.getVisibilityState,i=void 0===r?mt:r,s=n.initialState,o=void 0===s?"visible":s,a=n.isEnabled,u=void 0===a||a,c=n.pauseCheckDelay,d=void 0===c?3e4:c,l=t.call(this)||this;return l._pauseCheckDelay=3e4,l._currentState="visible",l._getVisibilityState=i,l._pauseCheckDelay=d,l._currentState=o,l._isEnabled=u,l._boundToggleState=l._toggleState.bind(l),l}return c(t$1,t),Object.defineProperty(t$1.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t$1.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t$1.prototype._toggleState=function(){var t=this,n=this._getVisibilityState();"hidden"!==n?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){t._pauseDelayTimer=void 0,t.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=n},t$1.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t$1.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t$1}(u),nt=function(){function e(t){var n=t.logger,r=t.connectionDelegate,i=void 0===r?null:r,s=this;this._onlineWorker=function(){var t;return null===(t=s.connectionDelegate)||void 0===t?void 0:t.reconnect()},this._offlineWorker=function(){var t;return null===(t=s.connectionDelegate)||void 0===t?void 0:t.disconnect()},this.unsubscribes=[],this._onlineListener=function(t){if(s.isAvailableOnWeb)return window.addEventListener("online",t),function(){return window.removeEventListener("online",t,!1)}},this._offlineListener=function(t){if(s.isAvailableOnWeb)return window.addEventListener("offline",t),function(){return window.removeEventListener("offline",t,!1)}},this.logger=n,i&&(this.connectionDelegate=i)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(t){Boolean(t)&&"function"==typeof t&&(this._onlineListener=t)},e.prototype.setOfflineListener=function(t){Boolean(t)&&"function"==typeof t&&(this._offlineListener=t)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var t=this;this.unsubscribes.forEach((function(n){try{null==n||n()}catch(n){t.logger.warn(n.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return a(this,void 0,void 0,(function(){return o(this,(function(t){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(t){fetch("https://www.google.com",{method:d.GET,mode:"no-cors"}).then((function(){return t(!0)})).catch((function(){return t(!1)}))}))]}))}))},e}(),rt=function(t){function t$1(n){var r=n.userId,i=n.nickname,s=n.profileUrl,o=n.profileImage,a=n.preferredLanguages,u=t.call(this)||this;return u.method=d.PUT,u.path="".concat(f,"/").concat(encodeURIComponent(r)),u.params=g(v({nickname:i,profile_url:s,profile_file:o,preferred_languages:a})),u}return c(t$1,t),t$1}(h),it=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.user=new _(n,y({},r)),i}return c(t$1,t),t$1}(m),st=function(t){function t$1(n){var r=n.userId,i=n.token,s=n.deviceOS,o=n.deviceManufacturer,a=n.systemPushEnabled,u=t.call(this)||this;return u.method=d.POST,u.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/apns"),u.params=g({apns_device_token:i,always_push:!0,device_os:s,device_manufacturer:o,system_push_enabled:a}),u}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.token=r.token,i.type=r.type?b[r.type.toLowerCase()]:b.UNKNOWN,i.user=new _(n,r.user),i}c(t$1,t)}(m);var ot=function(t){function t$1(n){var r=n.userId,i=n.token,s=n.deviceOS,o=n.deviceManufacturer,a=n.systemPushEnabled,u=t.call(this)||this;return u.method=d.POST,u.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/gcm"),u.params=g({gcm_reg_token:i,always_push:!0,device_os:s,device_manufacturer:o,system_push_enabled:a}),u}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.token=r.token,i.type=r.type?b[r.type.toLowerCase()]:b.UNKNOWN,i.user=new _(n,r.user),i}c(t$1,t)}(m);var at=function(t){function t$1(n){var r=n.userId,i=n.token,s=t.call(this)||this;return s.method=d.DELETE,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/apns/").concat(encodeURIComponent(i)),s}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.token=r.token,i.user=new _(n,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}c(t$1,t)}(m);var ut=function(t){function t$1(n){var r=n.userId,i=n.token,s=t.call(this)||this;return s.method=d.DELETE,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/gcm/").concat(encodeURIComponent(i)),s}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.token=r.token,i.user=new _(n,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}c(t$1,t)}(m);var ct=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.DELETE,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/apns"),i}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.type=r.type?b[r.type.toLowerCase()]:b.UNKNOWN,i.user=new _(n,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}c(t$1,t)}(m);var dt=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.DELETE,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/gcm"),i}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.type=r.type?b[r.type.toLowerCase()]:b.UNKNOWN,i.user=new _(n,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}c(t$1,t)}(m);var lt=function(t){function t$1(n){var r=n.userId,i=n.type,s=n.token,o=n.ts,a=t.call(this)||this;return a.method=d.GET,a.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/").concat(encodeURIComponent(i),"/device_tokens"),a.params={created_ts:o,token:s},a}return c(t$1,t),t$1}(h),vt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.pushTokens={type:r.type?b[r.type.toLowerCase()]:b.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return c(t$1,t),t$1}(m),yt=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),i}return c(t$1,t),t$1}(h),_t=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.autoAccept=r.auto_accept,i}return c(t$1,t),t$1}(m),bt=function(t){function t$1(n){var r=n.userId,i=n.willAutoAccept,s=t.call(this)||this;return s.method=d.PUT,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),s.params={auto_accept:i},s}return c(t$1,t),t$1}(h),$t=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.autoAccept=r.auto_accept,i}return c(t$1,t),t$1}(m),wt=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/push_preference"),i}return c(t$1,t),t$1}(h),kt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return c(t$1,t),t$1}(m),It=function(t){function t$1(n){var r=n.userId,i=n.doNotDisturbOn,s=n.startHour,o=n.startMin,a=n.endHour,u=n.endMin,c=n.timezone,l=t.call(this)||this;return l.method=d.PUT,l.path="".concat(f,"/").concat(encodeURIComponent(r),"/push_preference"),l.params={do_not_disturb:i,start_hour:s,start_min:o,end_hour:a,end_min:u,timezone:c},l}return c(t$1,t),t$1}(h),St=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return c(t$1,t),t$1}(m),Ct=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/push_preference"),i}return c(t$1,t),t$1}(h),Et=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},"number"==typeof r.snooze_start_ts&&(i.snoozePeriod.startTs=r.snooze_start_ts),"number"==typeof r.snooze_end_ts&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return c(t$1,t),t$1}(m),Tt=function(t){function t$1(n){var r=n.userId,i=n.snoozeOn,s=n.startTs,o=n.endTs,a=t.call(this)||this;return a.method=d.PUT,a.path="".concat(f,"/").concat(encodeURIComponent(r),"/push_preference"),a.params={snooze_enabled:i,snooze_start_ts:s,snooze_end_ts:o},a}return c(t$1,t),t$1}(h),Pt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},"number"==typeof r.snooze_start_ts&&(i.snoozePeriod.startTs=r.snooze_start_ts),"number"==typeof r.snooze_end_ts&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return c(t$1,t),t$1}(m),Dt=function(t){function t$1(n){var r=n.userId,i=n.blockedUserId,s=t.call(this)||this;return s.method=d.POST,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/block"),s.params={target_id:i},s}return c(t$1,t),t$1}(h);!function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.user=new _(n,r),i}c(t$1,t)}(m);var Ut=function(t){function t$1(n){var r=n.userId,i=n.unblockedUserId,s=t.call(this)||this;return s.method=d.DELETE,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/block/").concat(encodeURIComponent(i)),s}return c(t$1,t),t$1}(h);!function(t){function t$1(){return null!==t&&t.apply(this,arguments)||this}c(t$1,t)}(m);var Ot=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/push_preference"),i}return c(t$1,t),t$1}(h),At=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return c(t$1,t),t$1}(m),Nt=function(t){function t$1(n){var r=n.userId,i=n.pushTriggerOption,s=t.call(this)||this;return s.method=d.PUT,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/push_preference"),s.params={push_trigger_option:i},s}return c(t$1,t),t$1}(h),Mt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return c(t$1,t),t$1}(m),Lt=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/template"),i}return c(t$1,t),t$1}(h),Rt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.name=r.name,i}return c(t$1,t),t$1}(m),zt=function(t){function t$1(n){var r=n.userId,i=n.templateName,s=t.call(this)||this;return s.method=d.PUT,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/push/template"),s.params={name:i},s}return c(t$1,t),t$1}(h),Qt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.name=r.name,i}return c(t$1,t),t$1}(m),jt=function(t){function t$1(n){var r=n.userId,i=n.token,s=t.call(this)||this;return s.method=d.GET,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/friends/changelogs"),s.params={token:i},s}return c(t$1,t),t$1}(h),qt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.changelogs={addedUsers:r.added.map((function(t){return new _(n,t)})),updatedUsers:r.updated.map((function(t){return new _(n,t)})),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next},i}return c(t$1,t),t$1}(m),Ft=function(t){function t$1(n){var r=n.userId,i=n.discoveries,s=t.call(this)||this;return s.method=d.PUT,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/friend_discoveries"),s.params={friend_discoveries:i.map((function(t){return{friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName}}))},s}return c(t$1,t),t$1}(h),Ht=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.friendDiscoveryRequestId=r.friend_discovery_request_id,i}return c(t$1,t),t$1}(m),xt=function(t){function t$1(n){var r=n.userId,i=n.discoveryKeys,s=t.call(this)||this;return s.method=d.DELETE,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/friend_discoveries"),s.params={friend_discovery_keys:i},s}return c(t$1,t),t$1}(h);!function(t){function t$1(){return null!==t&&t.apply(this,arguments)||this}c(t$1,t)}(m);var Kt=function(t){function t$1(n){var r=n.userId,i=n.userIds,s=t.call(this)||this;return s.method=d.POST,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/friends"),s.params={user_ids:i},s}return c(t$1,t),t$1}(h),Gt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.users=r.users.map((function(t){return new _(n,t)})),i}return c(t$1,t),t$1}(m),Wt=function(t){function t$1(n){var r=n.userId,i=n.userIds,s=t.call(this)||this;return s.method=d.DELETE,s.path="".concat(f,"/").concat(encodeURIComponent(r),"/friends"),s.params={user_ids:i},s}return c(t$1,t),t$1}(h);!function(t){function t$1(){return null!==t&&t.apply(this,arguments)||this}c(t$1,t)}(m);var Bt=function(t){function t$1(n){var r=n.userId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(f,"/").concat(r,"/allow_friend_discovery"),i.params={},i}return c(t$1,t),t$1}(h),Vt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.allowFriendDiscovery=r.allow_friend_discovery,i}return c(t$1,t),t$1}(m),Jt=function(t){function t$1(n){var r=n.userId,i=n.allowFriendDiscovery,s=t.call(this)||this;return s.method=d.PUT,s.path="".concat(f,"/").concat(r,"/allow_friend_discovery"),s.params={allow_friend_discovery:i},s}return c(t$1,t),t$1}(h);!function(t){function t$1(){return null!==t&&t.apply(this,arguments)||this}c(t$1,t)}(m);var Xt,Yt=function(t){function t$1(){var n=t.call(this)||this;return n.method=d.GET,n.path=$,n}return c(t$1,t),t$1}(h),Zt=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.emojiContainer=new pt(r),i}return c(t$1,t),t$1}(m),en=function(t){function t$1(n){var r=n.categoryId,i=t.call(this)||this;return i.method=d.GET,i.path="".concat($,"/").concat(r),i}return c(t$1,t),t$1}(h),tn=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.emojiCategory=new ft(r),i}return c(t$1,t),t$1}(m),nn=function(t){function t$1(n){var r=n.key,i=t.call(this)||this;return i.method=d.GET,i.path="".concat(I,"/").concat(r),i}return c(t$1,t),t$1}(h),rn=function(t){function t$1(n,r){var i=t.call(this,n,r)||this;return i.emoji=new ht(r),i}return c(t$1,t),t$1}(m),sn=function(t){function t$1(){var n=t.call(this)||this;return n.method=d.GET,n.path="".concat(S),n}return c(t$1,t),t$1}(h),on=function(t){function t$1(n,r){var i,s=this,o=null!=r?r:{};return(s=t.call(this,n,r)||this).uikitConfiguration={string:JSON.stringify(o),json:o},s.updatedAt=null!==(i=null==r?void 0:r.updated_at)&&void 0!==i?i:0,s}return c(t$1,t),t$1}(m);!function(t){t.DELIVERED="DELIVERED",t.CLICKED="CLICKED"}(Xt||(Xt={}));var an,un=function(t){function t$1(n){var r=n.deviceToken,i=n.pushTrackingId,s=n.messageId,o=n.allowedPushNotification,a=n.channelKey,u=n.templateKey,c=n.eventType,l=n.notificationEventDeadline,h=t.call(this)||this;return h.method=d.POST,h.path=C,h.params=g({device_token:r,push_tracking_id:i,message_id:s,allowed_push_notification:o,channel_key:a,template_key:u,event_type:c,notification_event_deadline:l}),h}return c(t$1,t),t$1}(h),cn=function(){function n$1(t,n,r){var i=this;this._storeInitialized=!1,this._iid=t,this.options=n;var s=E.of(t),u=s.sdkState,c=s.cacheContext,d=s.dispatcher,l=s.sessionManager,h=s.requestQueue,f=s.logger,p=s.userEventHandlers,v=s.appStateToggleEnabled;this._onlineDetector=new nt({logger:f,connectionDelegate:{reconnect:function(){return a(i,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:if(n=E.of(t),r=n.sdkState,i=n.connectionManager,(s=n.sessionManager).session.hasSession)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i.connect(s.session.authToken)];case 2:return o.sent(),[3,4];case 3:if(a=o.sent(),T(a))throw a;return f.debug("connect failed by reconnect event = ",a),[3,4];case 4:return[3,9];case 5:if("foreground"!==r.appState)return[3,9];o.label=6;case 6:return o.trys.push([6,8,,9]),[4,i.resetAndReconnect()];case 7:return o.sent(),[3,9];case 8:if(u=o.sent(),T(u))throw u;return f.debug("resetAndReconnect failed by reconnect event = ",u),[3,9];case 9:return d.dispatch(new Ze),[2]}}))}))},disconnect:function(){P((function(){return a(i,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,E.of(t).connectionManager.disconnect()];case 1:return n.sent(),[2]}}))}))}))}}});var g=new Ge(t,{localCacheEnabled:c.localCacheEnabled,enableAutoResend:c.localCacheConfig.enableAutoResend,dispatcher:d,sdkState:u,logger:f});r.forEach((function(n){n.init(t,{sdkState:u,cacheContext:c,dispatcher:d,sessionManager:l,requestQueue:h,logger:f,onlineDetector:i._onlineDetector}),i[n.name]=n})),this._appStateChangeDetector=new tt({isEnabled:v}),this._appStateChangeDetector.on("resume",(function(){f.debug("the page resumes from freeze"),i.setForegroundState()})).on("pause",(function(){f.debug("the page freezes"),i.setBackgroundState()})),d.on((function(n){var r;if(n instanceof D)n.stateType===O.CONNECTED&&g.processNonAutoResendRegisteredPendingMessages();else if(n instanceof A){if("USEV"===n.code){var s=n.as(We).event;if(s.category===Be.FRIEND_DISCOVERED){var d=Ve.getDataAsFriendDiscoveredEvent(t,s).friendDiscoveries;N((function(){return a(i,void 0,void 0,(function(){return o(this,(function(t){return[2,p.forEach((function(t){t.onFriendsDiscovered&&t.onFriendsDiscovered(d)}))]}))}))}))}}}else if(n instanceof M){var l=E.of(i._iid).subscribedUnreadMessageCount,h=!1,v=n.ts;"number"==typeof v&&v>l.ts&&(l.all!==n.all&&(h=!0),l.all=n.all>=0?n.all:0,n.customTypes&&Object.keys(n.customTypes).forEach((function(t){l.customTypes[t]!==n.customTypes[t]&&(h=!0),l.customTypes[t]=n.customTypes[t]})),h=h&&l.ts>0,l.ts=v),h&&N((function(){return a(i,void 0,void 0,(function(){return o(this,(function(t){return[2,p.forEach((function(t){t.onTotalUnreadMessageCountChanged&&t.onTotalUnreadMessageCountChanged({groupChannelCount:l.all,feedChannelCount:l.feed,customTypeUnreadCount:l.customTypes}),t.onTotalUnreadMessageCountUpdated&&t.onTotalUnreadMessageCountUpdated(l.all,l.customTypes)}))]}))}))}))}else n instanceof L?(c.preference.set(i._getUserProfileCacheKey(u.userId),R.payloadify(n.userProfile)),(null===(r=n.userProfile.appInfo.notificationInfo)||void 0===r?void 0:r.isEnabled)&&c.preference.set(z(i.appId),{value:!0})):n instanceof Q&&n.error&&n.error.isSessionInvalidatedError&&(f.debug("session revoked."),i.disconnect())}))}return n$1.init=function(t){var n=t.appId,r=t.appVersion,i=t.modules,s=void 0===i?[]:i,o=t.options,a=void 0===o?new j:o,u=t.debugMode,c=void 0!==u&&u,d=t.customApiHost,l=t.customWebSocketHost,h=t.newInstance,f=void 0!==h&&h,p=t.logLevel,v=t.localCacheEnabled,g=void 0!==v&&v,m=t.localCacheConfig,y=void 0===m?new F:m,_=t.localCacheEncryption,b=t.useAsyncStorageStore,$=void 0===b?null:b,w=t.appStateToggleEnabled,k=void 0===w||w;if(!an||f){var I="su-".concat(H()),S=null!=_?_:{encrypt:function(t){return t},decrypt:function(t){return t}},C=new Ee({encryption:S});c||(C=x()?$?new Te({AsyncStorage:$,encryption:S}):new Ee({encryption:S}):new Pe({encryption:S})),new E(I,{appId:n,appVersion:r,options:a,apiHost:null!=d?d:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=l?l:"wss://ws-".concat(n,".sendbird.com"),store:C,encryption:S,logLevel:p,localCacheEnabled:g,localCacheConfig:y,debugMode:c,appStateToggleEnabled:k});var T=[new De,new He],P=new n$1(I,a,G(G([],K(s),!1),K(T),!1));return an||(an=P),P}return an},Object.defineProperty(n$1,"instance",{get:function(){return an},enumerable:!1,configurable:!0}),Object.defineProperty(n$1,"version",{get:function(){return W},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"appId",{get:function(){return E.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"appInfo",{get:function(){var t=E.of(this._iid).appInfo;return null!=t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"appVersion",{get:function(){var t;return null!==(t=E.of(this._iid).sdkState.appVersion)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"debugMode",{get:function(){return!!E.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"logLevel",{get:function(){return E.of(this._iid).logger.level},set:function(t){E.of(this._iid).logger.level=t},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"isCacheEnabled",{get:function(){return E.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"localCacheConfig",{get:function(){var t=E.of(this._iid).cacheContext;return t.localCacheEnabled?t.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"ekey",{get:function(){return E.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"currentUser",{get:function(){var t;return null!==(t=E.of(this._iid).sessionManager.currentUser)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"connectionState",{get:function(){var t=E.of(this._iid).connectionManager;return t.isConnected?B.OPEN:t.isConnecting?B.CONNECTING:B.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"lastConnectedAt",{get:function(){var t=E.of(this._iid),n=t.connectedAt;return t.connectionManager.isConnected?n:0},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"fcmPushToken",{get:function(){var t;return null!==(t=this._fcmPushToken)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(n$1.prototype,"apnsPushToken",{get:function(){var t;return null!==(t=this._apnsPushToken)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),n$1.prototype._getNestDBVersion=function(){return 7},n$1.prototype._getPreferenceCacheKey=function(t){return"sendbird@".concat(this.appId,"/").concat(t,".pref")},n$1.prototype._getUserProfileCacheKey=function(t){return"sendbird@".concat(this.appId,"/").concat(t,".profile")},n$1.prototype.getMemoryStoreForDebugging=function(){var t=E.of(this._iid),n=t.debugMode,r=t.cacheContext;if(n)return r.store instanceof Ee?r.store:null;throw V.debugModeRequired},n$1.prototype.addExtension=function(t,n){var r=E.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(t)>-1&&r.extensions&&(r.extensions[t]=n)},n$1.prototype.addSendbirdExtensions=function(t,n,r){var i,s,o=E.of(this._iid),a=o.logger,u=o.sdkState,c=new RegExp(J);if(0===t.length)return a.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(t.find((function(t){return!c.test(t.version)})))return a.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(r)try{for(var d=X(Object.entries(r)),l=d.next();!l.done;l=d.next()){var h=K(l.value,2),f=h[0],p=h[1];if(/&|=/.test(f)||/&|=/.test(p))return a.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(t){i={error:t}}finally{try{l&&!l.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}return u.sendbirdRuntimeEnvironment={sendbirdExtensions:t,deviceOS:n,customData:r},!0},n$1.prototype.setOnlineListener=function(t){this._onlineDetector.setOnlineListener(t)},n$1.prototype.setOfflineListener=function(t){this._onlineDetector.setOfflineListener(t)},n$1.prototype._safeInitializeStore=function(t){return a(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:n=E.of(this._iid).cacheContext,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,n.store.init(t)];case 2:return r.sent(),this._storeInitialized=!0,[3,5];case 3:return r.sent(),n.replaceStore(new Ee),[4,this._safeInitializeStore(t)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))},n$1.prototype.initializeCache=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,d,l;return o(this,(function(o){switch(o.label){case 0:if(n=E.of(this._iid),r=n.sdkState,i=n.cacheContext,s=n.dispatcher,a=n.logger,r.userId&&r.userId===t)return[3,9];if(u="sendbird@".concat(r.appId,"/").concat(t,".db"),!i.localCacheEnabled)return[3,7];o.label=1;case 1:return o.trys.push([1,4,,6]),i.nestdb&&i.nestdb.state!==Ue.CLOSED&&i.nestdb.name===u?[3,3]:(c="sendbird@".concat(r.appId,"/").concat(t,".db"),(d=i.nestdb=new Ae({name:c,version:this._getNestDBVersion(),store:i.store,config:new Oe({dbname:c,itemSizeLimit:61440})})).on("upgrade",gt(d)),d.on("storeReplaced",(function(t){i.replaceStore(t),i.localCacheEnabled=!1,d.on("upgrade",gt(d))})),[4,d.open()]);case 2:o.sent(),this._storeInitialized=!0,s.dispatch(new Je(this._iid,{userId:t})),o.label=3;case 3:return r.userId=t,[3,6];case 4:return l=o.sent(),a.warn("Nest DB Open Failed. ",l),i.store instanceof Ee||(i.replaceStore(new Ee),i.localCacheEnabled=!1),[4,this._safeInitializeStore(u)];case 5:throw o.sent(),r.userId=t,V.databaseError;case 6:return[3,9];case 7:return[4,this._safeInitializeStore(u)];case 8:o.sent(),r.userId=t,o.label=9;case 9:return[2]}}))}))},n$1.prototype.getCacheDataSize=function(){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return(t=E.of(this._iid).cacheContext).localCacheEnabled&&t.nestdb?[4,t.nestdb.estimateUsage()]:[3,2];case 1:return[2,n.sent()];case 2:return[2,0]}}))}))},n$1.prototype.clearCachedData=function(){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return(t=E.of(this._iid).cacheContext).localCacheEnabled&&t.nestdb?[4,t.nestdb.clear()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this._storeInitialized?[4,t.preference.clear()]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},n$1.prototype.clearCachedMessages=function(t){return a(this,void 0,void 0,(function(){var n,r,i=this;return o(this,(function(s){switch(s.label){case 0:return Z(Y("string",t)).throw(V.invalidParameters),n=Ne.of(this._iid),r=Me.of(this._iid),n&&r?[4,Promise.all(t.map((function(t){return a(i,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return[4,n.removeMessagesOfChannel(t)];case 1:return i.sent(),[4,r.removeMessagesOfChannel(t)];case 2:return i.sent(),[2]}}))}))})))]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))},n$1.prototype._setupPreference=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return n=E.of(this._iid),r=n.sdkState,i=n.cacheContext,s=n.statManager,[4,i.preference.init(this._getPreferenceCacheKey(t),this._getNestDBVersion())];case 1:return o.sent(),[4,i.preference.get(this._getUserProfileCacheKey(t))];case 2:return(a=o.sent())&&new R(this._iid,a).apply(),[4,s.init("sendbird@".concat(r.appId,"/").concat(t,".statlog"))];case 3:return o.sent(),[2]}}))}))},n$1.prototype._ready=function(t,n,r){return void 0===r&&(r={}),a(this,void 0,void 0,(function(){var i,s,a,u,c,d;return o(this,(function(o){switch(o.label){case 0:return Z(ee("string",t)&&ee("string",n,!0)).throw(V.invalidParameters),i=E.of(this._iid),s=i.sdkState,a=i.cacheContext,u=i.connectionManager,c=r.errorForOtherUser,s.userId&&s.userId!==t?c?[3,2]:[4,u.logout()]:[3,3];case 1:return o.sent(),[3,3];case 2:throw c;case 3:return o.trys.push([3,5,6,8]),[4,this.initializeCache(t)];case 4:return o.sent(),E.of(this._iid).dispatcher.dispatch(new Xe),[3,8];case 5:return o.sent(),d=E.of(this._iid).logger,a.localCacheEnabled=!1,d.warn("Cache initialization failed - cache is not available."),[3,8];case 6:return[4,this._setupPreference(t)];case 7:return o.sent(),[7];case 8:return[2]}}))}))},n$1.prototype.authenticateFeed=function(t,n){var r;return a(this,void 0,void 0,(function(){var i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return i=E.of(this._iid),s=i.sessionManager,a=i.connectionManager,[4,this._ready(t,n,{errorForOtherUser:a.isConnected?V.alreadyConnectedAsAnotherUser:void 0})];case 1:return o.sent(),(null===(r=s.session.services)||void 0===r?void 0:r.includes(te.CHAT))?[3,3]:(n||s.handler||(u=new Le,this.setSessionHandler(u)),[4,s.authenticateFeed(t,n)]);case 2:o.sent(),o.label=3;case 3:return[2,this.currentUser]}}))}))},n$1.prototype.connect=function(t,n){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._ready(t,n)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,E.of(this._iid).connectionManager.connect(n)];case 3:return r.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},n$1.prototype.reconnect=function(){var t=E.of(this._iid),n=t.connectionManager,r=t.sdkState,i=t.sessionManager.session.hasSession;return i&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),n.resetAndReconnect().then((function(){r.appState="foreground"})).catch((function(){}))),i},n$1.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(s){switch(s.label){case 0:return t=E.of(this._iid),n=t.connectionManager,r=t.sdkState,i=t.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),i.cancelAll(),[4,n.logout()];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),r.appState="foreground",[2]}}))}))},n$1.prototype.disconnectWebSocket=function(){return a(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:return t=E.of(this._iid),n=t.connectionManager,r=t.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,n.disconnectWebSocket(!0)];case 1:return i.sent(),[2]}}))}))},n$1.prototype.setBackgroundState=function(){var t=E.of(this._iid),n=t.connectionManager,r=t.sdkState,i=t.logger;"foreground"===r.appState&&(r.appState="background",i.debug("going background state"),n.background().catch((function(t){i.debug("setBackgroundState error = ",t)})))},n$1.prototype.setForegroundState=function(){var t=E.of(this._iid),n=t.connectionManager,r=t.sdkState,i=t.dispatcher,s=t.logger;"background"===r.appState&&(r.appState="foreground",s.debug("going foreground state"),n.resetAndReconnect().catch((function(t){s.debug("setForgroundState error = ",t)})),i.dispatch(new Ze))},n$1.prototype.setSessionHandler=function(t){Z(t instanceof Le).throw(V.invalidParameters),E.of(this._iid).sessionManager.handler=t},n$1.prototype.addUserEventHandler=function(t,n){Z(ee("string",t)&&n instanceof Re).throw(V.invalidParameters),E.of(this._iid).userEventHandlers.set(t,n)},n$1.prototype.removeUserEventHandler=function(t){E.of(this._iid).userEventHandlers.delete(t)},n$1.prototype.removeAllUserEventHandler=function(){E.of(this._iid).userEventHandlers.clear()},n$1.prototype.addConnectionHandler=function(t,n){Z(ee("string",t)&&n instanceof ze).throw(V.invalidParameters),E.of(this._iid).connectionHandlers.set(t,n)},n$1.prototype.removeConnectionHandler=function(t){E.of(this._iid).connectionHandlers.delete(t)},n$1.prototype.removeAllConnectionHandler=function(){E.of(this._iid).connectionHandlers.clear()},n$1.prototype.createApplicationUserListQuery=function(t){return void 0===t&&(t={}),new Qe(this._iid,t)},n$1.prototype.createBlockedUserListQuery=function(t){return void 0===t&&(t={}),new je(this._iid,t)},n$1.prototype.createFriendListQuery=function(t){return void 0===t&&(t={}),new qe(this._iid,t)},n$1.prototype.createMessageSearchQuery=function(t){return new Fe(this._iid,t)},n$1.prototype.createPollListQuery=function(t){return new ne(this._iid,y({},t))},n$1.prototype.createPollVoterListQuery=function(t){return new re(this._iid,y({},t))},n$1.prototype.buildUserFromSerializedData=function(t){var n=ie(t);return new _(this._iid,_.payloadify(n))},n$1.prototype.updateCurrentUserInfo=function(t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return n=y(y({},et),t),Z(function(t){return se(t.profileImage,!0)&&ee("string",t.profileUrl,!0)&&ee("string",t.nickname,!0)}(n)).throw(V.invalidParameters),this.currentUser?(r=E.of(this._iid),i=r.sdkState,s=r.requestQueue,a=new rt(y({userId:i.userId},n)),[4,s.send(a)]):[3,2];case 1:return u=o.sent(),c=u.as(it).user,this.currentUser&&(n.nickname&&(this.currentUser.nickname=c.nickname),(n.profileUrl||n.profileImage)&&(this.currentUser.plainProfileUrl=c.profileUrl)),[2,c];case 2:throw V.connectionRequired}}))}))},n$1.prototype.updateCurrentUserInfoWithPreferredLanguages=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return Z(Y("string",t)).throw(V.invalidParameters),this.currentUser?(n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new rt({userId:r.userId,preferredLanguages:t}),[4,i.send(s)]):[3,2];case 1:return a=o.sent(),u=a.as(it).user,this.currentUser&&(this.currentUser.preferredLanguages=u.preferredLanguages),[2,u];case 2:throw V.connectionRequired}}))}))},n$1.prototype.registerFCMPushTokenForCurrentUser=function(t,n){var r,i;return a(this,void 0,void 0,(function(){var s,u,c,d,l,h,f=this;return o(this,(function(p){switch(p.label){case 0:if(Z(ee("string",t)&&ee("string",null==n?void 0:n.deviceManufacturer,!0)).throw(V.invalidParameters),(null==n?void 0:n.deviceOS)&&Z(ue(ae,n.deviceOS.platform,!0)&&ee("string",n.deviceOS.version,!0)).throw(V.invalidParameters),!this.currentUser)return[3,6];s={deviceOS:"".concat((null===(r=null==n?void 0:n.deviceOS)||void 0===r?void 0:r.platform)||ae.ANDROID,"-").concat((null===(i=null==n?void 0:n.deviceOS)||void 0===i?void 0:i.version)||"unknown"),deviceManufacturer:null==n?void 0:n.deviceManufacturer,systemPushEnabled:null==n?void 0:n.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),u=E.of(this._iid),c=u.sessionManager,d=u.sdkState,l=u.requestQueue,c.hasDeviceToken(b.FCM,t)?[2,oe.SUCCESS]:(h=new ot({userId:d.userId,token:t,deviceOS:s.deviceOS,deviceManufacturer:s.deviceManufacturer,systemPushEnabled:s.systemPushEnabled}),[4,l.send(h)]);case 2:return p.sent(),[4,P((function(){return a(f,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return c.setDeviceToken(b.FCM,t,s),[4,c.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return p.sent(),this._fcmPushToken="",[2,oe.SUCCESS];case 4:return p.sent(),[2,oe.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=t,[2,oe.PENDING];case 7:return[2]}}))}))},n$1.prototype.unregisterFCMPushTokenForCurrentUser=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,u,c,d=this;return o(this,(function(l){switch(l.label){case 0:if(Z(ee("string",t)).throw(V.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),n=E.of(this._iid),r=n.sessionManager,i=n.sdkState,s=n.requestQueue,u=new ut({userId:i.userId,token:t}),[4,s.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,P((function(){return a(d,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return r.unsetDeviceToken(b.FCM,t),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return l.sent(),this._fcmPushToken="",[2,oe.SUCCESS];case 4:return l.sent(),[2,oe.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=t,[2,oe.PENDING];case 7:return[2]}}))}))},n$1.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return a(this,void 0,void 0,(function(){var t,n,r,i,s,u,c=this;return o(this,(function(d){switch(d.label){case 0:return this.currentUser?(t=E.of(this._iid),n=t.sessionManager,r=t.sdkState,i=t.requestQueue,s=new dt({userId:r.userId}),[4,i.send(s)]):[3,3];case 1:return u=d.sent().lastDeletedAt,[4,P((function(){return a(c,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return n.unsetDeviceTokens(b.FCM),n.setDeviceTokenDeletedAt(u),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))},n$1.prototype.registerAPNSPushTokenForCurrentUser=function(t,n){var r,i;return a(this,void 0,void 0,(function(){var s,u,c,d,l,h,f=this;return o(this,(function(p){switch(p.label){case 0:if(Z(ee("string",t)&&ee("string",null==n?void 0:n.deviceManufacturer,!0)).throw(V.invalidParameters),(null==n?void 0:n.deviceOS)&&Z(ue(ae,n.deviceOS.platform,!0)&&ee("string",n.deviceOS.version,!0)).throw(V.invalidParameters),!this.currentUser)return[3,6];s={deviceOS:"".concat((null===(r=null==n?void 0:n.deviceOS)||void 0===r?void 0:r.platform)||ae.IOS,"-").concat((null===(i=null==n?void 0:n.deviceOS)||void 0===i?void 0:i.version)||"unknown"),deviceManufacturer:null==n?void 0:n.deviceManufacturer,systemPushEnabled:null==n?void 0:n.systemPushEnabled},p.label=1;case 1:return p.trys.push([1,4,,5]),u=E.of(this._iid),c=u.sessionManager,d=u.sdkState,l=u.requestQueue,c.hasDeviceToken(b.APNS,t)?[2,oe.SUCCESS]:(h=new st({userId:d.userId,token:t,deviceOS:s.deviceOS,deviceManufacturer:s.deviceManufacturer,systemPushEnabled:s.systemPushEnabled}),[4,l.send(h)]);case 2:return p.sent(),[4,P((function(){return a(f,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return c.setDeviceToken(b.APNS,t,s),[4,c.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return p.sent(),this._apnsPushToken="",[2,oe.SUCCESS];case 4:return p.sent(),[2,oe.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=t,[2,oe.PENDING];case 7:return[2]}}))}))},n$1.prototype.unregisterAPNSPushTokenForCurrentUser=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,u,c,d=this;return o(this,(function(l){switch(l.label){case 0:if(Z(ee("string",t)).throw(V.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),n=E.of(this._iid),r=n.sessionManager,i=n.sdkState,s=n.requestQueue,u=new at({userId:i.userId,token:t}),[4,s.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,P((function(){return a(d,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return r.unsetDeviceToken(b.APNS,t),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return l.sent(),this._apnsPushToken="",[2,oe.SUCCESS];case 4:return l.sent(),[2,oe.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=t,[2,oe.PENDING];case 7:return[2]}}))}))},n$1.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return a(this,void 0,void 0,(function(){var t,n,r,i,s,u,c=this;return o(this,(function(d){switch(d.label){case 0:return this.currentUser?(t=E.of(this._iid),n=t.sessionManager,r=t.sdkState,i=t.requestQueue,s=new ct({userId:r.userId}),[4,i.send(s)]):[3,3];case 1:return u=d.sent().lastDeletedAt,[4,P((function(){return a(c,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return n.unsetDeviceTokens(b.APNS),n.setDeviceTokenDeletedAt(u),[4,n.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))},n$1.prototype.markPushNotificationAsDelivered=function(t,n){var r;return void 0===n&&(n=!0),a(this,void 0,void 0,(function(){var i,s,a,u,c,d,l,h,f,p,v,g,m,y,_,b,$,w,k;return o(this,(function(o){switch(o.label){case 0:if(i=E.of(this._iid),s=i.logger,a=i.sessionManager,u=i.requestQueue,c=i.pushNotificationAckManager,s.debug("markPushNotificationAsDelivered:",t),d=Xt.DELIVERED,l=c.parseData(t),h=l.pushTrackingId,f=l.sessionTopics,p=l.sessionKey,v=l.messageId,g=l.channelKey,m=l.templateKey,y=l.notificationEventDeadline,!p)throw s.info("Can't use markPushNotificationAsDelivered() feature."),V.malformedDataError;if(!f.includes(ce.PUSH_ACKNOWLEDGEMENT))throw s.info("Can't use markPushNotificationAsDelivered() feature."),V.malformedDataError;if(c.isAcked(h,d))return s.info("already delivered push notification:",h),[2];_=Boolean(g),b=n&&_,$=null===(r=a.deviceTokens[0])||void 0===r?void 0:r.token,w=new un({deviceToken:null!=$?$:"",pushTrackingId:h,eventType:d,messageId:v,channelKey:g,templateKey:m,notificationEventDeadline:y,allowedPushNotification:b}),p&&(w.headers["Session-Key"]=p),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,u.send(w)];case 2:return o.sent(),c.markAsAcked(h,d),[3,4];case 3:throw k=o.sent(),s.debug("failed to mark push notification as delivered. push tracking id: ".concat(h,". error: ").concat(k)),k;case 4:return[2]}}))}))},n$1.prototype.markPushNotificationAsClicked=function(t){var n;return a(this,void 0,void 0,(function(){var r,i,s,a,u,c,d,l,h,f,p,v,g,m,y,_,b;return o(this,(function(o){switch(o.label){case 0:if(r=E.of(this._iid),i=r.logger,s=r.sessionManager,a=r.requestQueue,u=r.pushNotificationAckManager,i.debug("markPushNotificationAsClicked:",t),c=Xt.CLICKED,d=u.parseData(t),l=d.pushTrackingId,h=d.sessionTopics,f=d.sessionKey,p=d.messageId,v=d.channelKey,g=d.templateKey,m=d.notificationEventDeadline,!f)throw i.info("Can't use markPushNotificationAsDelivered() feature."),V.malformedDataError;if(!h.includes(ce.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsDelivered() feature."),V.malformedDataError;if(u.isAcked(l,c))return i.info("already clicked push notification:",l),[2];y=null===(n=s.deviceTokens[0])||void 0===n?void 0:n.token,_=new un({deviceToken:null!=y?y:"",pushTrackingId:l,eventType:c,messageId:p,channelKey:v,templateKey:g,notificationEventDeadline:m}),f&&(_.headers["Session-Key"]=f),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.send(_)];case 2:return o.sent(),u.markAsAcked(l,c),[3,4];case 3:throw b=o.sent(),i.debug("failed to mark push notification as clicked. push tracking id: ".concat(l,". error: ").concat(b)),b;case 4:return[2]}}))}))},n$1.prototype.getChannelInvitationPreference=function(){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return t=E.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new yt({userId:n.userId}),[4,r.send(i)];case 1:return s=o.sent(),[2,{autoAccept:s.as(_t).autoAccept}]}}))}))},n$1.prototype.setChannelInvitationPreference=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return Z(ee("boolean",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new bt({userId:r.userId,willAutoAccept:t}),[4,i.send(s)];case 1:return a=o.sent(),[2,{autoAccept:a.as($t).autoAccept}]}}))}))},n$1.prototype.getDoNotDisturb=function(){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return t=E.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new wt({userId:n.userId}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(kt).preference]}}))}))},n$1.prototype.setDoNotDisturb=function(t,n,r,i,s,u){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=""),a(this,void 0,void 0,(function(){var a,c,d,l,h;return o(this,(function(o){switch(o.label){case 0:return Z(ee("boolean",t)&&ee("number",n)&&ee("number",r)&&ee("number",i)&&ee("number",s)&&ee("string",u)).throw(V.invalidParameters),a=E.of(this._iid),c=a.sdkState,d=a.requestQueue,l=new It({userId:c.userId,doNotDisturbOn:t,startHour:n,startMin:r,endHour:i,endMin:s,timezone:u}),[4,d.send(l)];case 1:return h=o.sent(),[2,h.as(St).preference]}}))}))},n$1.prototype.getSnoozePeriod=function(){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return t=E.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ct({userId:n.userId}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(Et).snoozePeriod]}}))}))},n$1.prototype.setSnoozePeriod=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),a(this,void 0,void 0,(function(){var i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return Z(ee("boolean",t)&&ee("number",n)&&ee("number",r)).throw(V.invalidParameters),i=E.of(this._iid),s=i.sdkState,a=i.requestQueue,u=new Tt({userId:s.userId,snoozeOn:t,startTs:n,endTs:r}),[4,a.send(u)];case 1:return c=o.sent(),[2,c.as(Pt).snoozePeriod]}}))}))},n$1.prototype.getMyPushTokensByToken=function(t,n){return a(this,void 0,void 0,(function(){var r,i,s,a,u,c,d,l,h,f,p,v;return o(this,(function(o){switch(o.label){case 0:return Z(ee("string",t)&&ue(b,n)).throw(V.invalidParameters),r=E.of(this._iid),i=r.sdkState,s=r.requestQueue,a=r.sessionManager,u=new lt({userId:i.userId,type:n,token:t}),[4,s.send(u)];case 1:c=o.sent(),d=c.as(vt).pushTokens;try{for(l=X(d.deviceTokens),h=l.next();!h.done;h=l.next())f=h.value,a.setDeviceToken(d.type,f)}catch(t){p={error:t}}finally{try{h&&!h.done&&(v=l.return)&&v.call(l)}finally{if(p)throw p.error}}return[4,a.saveDeviceToken()];case 2:return o.sent(),[2,d]}}))}))},n$1.prototype.getPushTriggerOption=function(){return a(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(s){switch(s.label){case 0:return t=E.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ot({userId:n.userId}),[4,r.send(i)];case 1:return[2,s.sent().as(At).pushTriggerOption]}}))}))},n$1.prototype.setPushTriggerOption=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(ue(de,t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Nt({userId:r.userId,pushTriggerOption:t}),[4,i.send(s)];case 1:return[2,o.sent().as(Mt).pushTriggerOption]}}))}))},n$1.prototype.getPushTemplate=function(){return a(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(s){switch(s.label){case 0:return t=E.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Lt({userId:n.userId}),[4,r.send(i)];case 1:return[2,s.sent().as(Rt).name]}}))}))},n$1.prototype.setPushTemplate=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(ue(le,t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new zt({userId:r.userId,templateName:t}),[4,i.send(s)];case 1:return[2,o.sent().as(Qt).name]}}))}))},n$1.prototype.blockUser=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(t instanceof _||ee("string",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Dt({userId:r.userId,blockedUserId:t instanceof _?t.userId:t}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n$1.prototype.blockUserWithUserId=function(t){return a(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.blockUser(t)]}))}))},n$1.prototype.unblockUser=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(t instanceof _||ee("string",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Ut({userId:r.userId,unblockedUserId:t instanceof _?t.userId:t}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n$1.prototype.unblockUserWithUserId=function(t){return a(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.unblockUser(t)]}))}))},n$1.prototype.getFriendChangeLogsByToken=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return Z(ee("string",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new jt({userId:r.userId,token:t}),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(qt).changelogs]}}))}))},n$1.prototype.getAllowFriendDiscovery=function(){return a(this,void 0,void 0,(function(){var t,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return t=E.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Bt({userId:n.userId}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(Vt).allowFriendDiscovery]}}))}))},n$1.prototype.setAllowFriendDiscovery=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(ee("boolean",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Jt({userId:r.userId,allowFriendDiscovery:t}),[4,i.send(s)];case 1:return o.sent(),[2,t]}}))}))},n$1.prototype.uploadFriendDiscoveries=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Ft({userId:r.userId,discoveries:t}),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(Ht).friendDiscoveryRequestId]}}))}))},n$1.prototype.deleteFriendDiscovery=function(t){return a(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.deleteFriendDiscoveries([t])]}))}))},n$1.prototype.deleteFriendDiscoveries=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(Y("string",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new xt({userId:r.userId,discoveryKeys:t}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n$1.prototype.addFriends=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return Z(Y("string",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Kt({userId:r.userId,userIds:t}),[4,i.send(s)];case 1:return a=o.sent(),[2,a.as(Gt).users]}}))}))},n$1.prototype.deleteFriend=function(t){return a(this,void 0,void 0,(function(){return o(this,(function(n){return[2,this.deleteFriends([t])]}))}))},n$1.prototype.deleteFriends=function(t){return a(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return Z(Y("string",t)).throw(V.invalidParameters),n=E.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Wt({userId:r.userId,userIds:t}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n$1.prototype.getAllEmoji=function(){return a(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:return t=E.of(this._iid).requestQueue,n=new Yt,[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(Zt).emojiContainer]}}))}))},n$1.prototype.getEmojiCategory=function(t){return a(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(s){switch(s.label){case 0:return n=E.of(this._iid).requestQueue,r=new en({categoryId:t}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(tn).emojiCategory]}}))}))},n$1.prototype.getEmoji=function(t){return a(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(s){switch(s.label){case 0:return n=E.of(this._iid).requestQueue,r=new nn({key:t}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(rn).emoji]}}))}))},n$1.prototype.getUIKitConfiguration=function(){return a(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(s){switch(s.label){case 0:return t=E.of(this._iid),Z(t.hasExtension("sb_uikit")).throw(V.notSupportedError),n=t.requestQueue,r=new sn,[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(on).uikitConfiguration]}}))}))},n$1}();export{Qe as ApplicationUserListQuery,je as BlockedUserListQuery,i as ChannelType,ze as ConnectionHandler,B as ConnectionState,ae as DeviceOsPlatform,ht as Emoji,ft as EmojiCategory,pt as EmojiContainer,qe as FriendListQuery,F as LocalCacheConfig,Ee as MemoryStore,le as PushTemplate,oe as PushTokenRegistrationState,b as PushTokenType,de as PushTriggerOption,j as SendbirdChatOptions,V as SendbirdError,Le as SessionHandler,_ as User,Re as UserEventHandler,cn as default};

